{% extends "layouts/base.html" %}
{% load static %}

{% block content %}
    <div class="container mt-5">
        <h2 class="mb-4">Baholangan Vazifalar (Assessed Tasks)</h2>

        {% if tasks %}
            <table class="table table-bordered table-hover">
                <thead class="table-light">
                <tr>
                    <th>Ustoz</th>
                    <th>Vazifa turi</th>
                    <th>Yuklangan tur</th>
                    <th>Fayl</th>
                    <th>Izoh</th>
                    <th>Ball</th>
                    <th>Baholangan sana</th>
                </tr>
                </thead>
                <tbody>
                {% for task in tasks %}
                    <tr>
                        <td>
                            {% if task.teacher.get_full_name != "" %}
                                {{ task.teacher.get_full_name }}
                            {% else %}
                                {{ task.teacher.email }}
                            {% endif %}
                        </td>
                        <td>{{ task.get_task_type_display }}</td>
                        <td>{{ task.get_task_upload_display }}</td>
                        <td>
                            {% if task.task_upload_by %}
                                <a href="{{ task.task_upload_by.url }}" target="_blank">Ko‘rish</a>
                            {% else %}
                                —
                            {% endif %}
                        </td>
                        <td>{{ task.assessment_comment|default:"—" }}</td>
                        <td>{{ task.score|default:"—" }}</td>
                        <td>{{ task.assessed_at|date:"Y-m-d H:i" }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>Baholangan vazifalar mavjud emas.</p>
        {% endif %}
    </div>
{% endblock %}
