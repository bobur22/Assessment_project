{% extends 'layouts/base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>ðŸ“š Kafedra Materiallari</h2>
        {% if user.role == 'kafedra' %}
            <a href="{% url 'material_create' %}" class="btn btn-primary">Yangi material qoâ€˜shish</a>
        {% endif %}
    </div>

    <table class="table table-bordered table-striped">
        <thead class="table-light">
            <tr>
                <th>Nomi</th>
                <th>Tur</th>
                <th>Sana</th>
                <th>Jurnal</th>
                <th>Ustozlar</th>
                <th>Fayl</th>
            </tr>
        </thead>
        <tbody>
            {% for material in materials %}
                <tr>
                    <td>{{ material.title }}</td>
                    <td>{{ material.get_kafedraTaskType_display }}</td>
                    <td>{{ material.date }}</td>
                    <td>{{ material.jurnal }}</td>
                    <td>
                        {% for teacher in material.teachers.all %}
                            {{ teacher.get_full_name }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                    </td>
                    <td>
                        {% if material.kafedraUpload %}
                            <a href="{{ material.kafedraUpload.url }}" target="_blank">Yuklash</a>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                </tr>
            {% empty %}
                <tr><td colspan="6">Materiallar mavjud emas.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
